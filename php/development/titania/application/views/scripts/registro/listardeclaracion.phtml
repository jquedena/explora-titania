<table border=1>
<tr>
	<td><div id="Panellistadeclaraciones" style="margin-top: 5px;"></div></td>
	<td></td>
</tr>
<tr>
	<td colspan=2><div id="PanelDetalleDeclaracion"></div></td>
</tr>
</table>

<script type="text/javascript">

buscarDetalle = function(id) {
	row = $(this).getRowData(id);
	        
    parameters = {
        "name": "tblDetalleDeclaracion",
        "procedure": "pl_function.listar_predios",
        "print": "true",
        "parameters": '{' +
        '"p_mhresum":"' + row.mhresum + '",' +
        '"p_cidpers":"' + row.cidpers + '"' +
        '}'
    };

    ajaxDialog = false;
    procesarProcedimientoJSON("PanelDetalleDeclaracion", "tblDetalleDeclaracion", optionPredio, parameters, bindkeysPredio);
};

optionPredio = {
        height: 150,
        width: 450,
        colNames: [
			'Codigo',
			'Direccion',
			'Uso'
        ],
        colModel: [
				{name: 'ccodpre', index:'ccodpre', width: 80}, /* , frozen: true */
				{name: 'tnumero', index:'tnumero', width: 260},
				{name: 'vusogen', index:'vusogen', width: 100}
               ],
		caption: "&nbsp;&nbsp;&nbsp;",
		
       onSelectRow: function(id) {
	       row = $(this).getRowData(id);
	     
	       console.log(row);

         
        }
    };

//Listar las declaraciones
optionDeclaraciones = {
        height: 150,
        width: 400,
        colNames: [
            'Nro. Doc.',
            'dfecdoc',
            'Motivo',
            'Fec. Registro',
            'Observaci\u00F3n',
            'Cod. Persona'
        ],
        colModel: [
                   {name: 'vnrodoc', index:'vnrodoc', width: 80, align: 'center'},
                   {name: 'dfecdoc', index:'dfecdoc', width: 100},
                   {name: 'vmotivo', index:'vmotivo', width: 100},
                   {name: 'mhresum', index:'mhresum', width: 100, hidden: true},
                   {name: 'vobserv', index:'vobserv', width: 100, hidden: true},
                   {name: 'cidpers', index:'cidpers', width: 100, hidden: true}
               ],
		caption: "&nbsp;&nbsp;&nbsp;",
       	onSelectRow: buscarDetalle
    };
    
	listarDeclaracion = function() {
		parameters = {
		"name": "tblListarDeclaracion",
		"print": "true",
		"procedure": "pl_function.listar_declaraciones",
		"parameters": '{' +
		'"p_cidpers":"<?php echo $this->cidpers; ?>"' +
		'}'
		};	
		
		procesar = function(requestData){
			options = $.extend(optionDeclaraciones, {
				data: requestData,
				datatype: "local"
			});
			procesarJSON("Panellistadeclaraciones", "tblListaDeclaracion", optionDeclaraciones, null, null);
		};

		procesarConsultaSubProceso("registrar", parameters, procesar, 'json');
		
	};

$(document).ready(function(){
	listarDeclaracion();
});

</script>