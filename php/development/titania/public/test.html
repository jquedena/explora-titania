<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta content="text/html;charset=utf-8" http-equiv="Content-type">
	<script type="text/javascript" src="http://localhost/desarrollo/titania/public/js/app/ui/01_jquery-1.8.2.min.js"></script>
</head>
<body>
<script type="text/javascript">
	/*
	I 205 \u00CD
	U 218 \u00DA
	O 211 \u00D3
	E 201 \u00C9
	A 193 \u00C1

	?  63 \u003F
	¿ 191 \u00BF
	*/
	var entityMap = {
		/*
		"&": "&amp;",
		"<": "&lt;",
		">": "&gt;",
		'"': '&quot;',
		"'": '&#39;',
		"/": '&#x2F;',*/
		"á": "\u00B0",
		"é": "\u00ED",
		"í": "\u00FA",
		"ó": "\u00F3",
		"ú": "\u00E9",
		"": "\u00E1",
		"": "\u00F1",
		'"': "\u0022",
	};
	
	/*

	function escapeHtml(string) {
		return String(string).replace(/[&<>"'\/"]/g, function (s) {
			console.log(s);
			return entityMap[s];
		});
	}

	var str = "ÑÁÉÍÓÚ'&<>¡¿?!|";
	console.log(escape(str));
	try{
		var newStr = "";
		var nextCode = 0;
		for (var i = 0;i < str.length;i++){
			nextCode = str.charCodeAt(i);
			console.log(nextCode);
		}
		console.log(newStr);
	}
	catch(err){
		console.log(err);
	}
	
		console.log(escapeHtml(''));
		console.log(escapeHtml(''));
		console.log(escapeHtml(''));
		console.log(escapeHtml(''));
		console.log(escapeHtml(''));
		console.log(escapeHtml(''));
		console.log(escapeHtml('"'));
		console.log(escapeHtml(''));
	*/
	
	$.post('test.php', {test: [{index: 1, name: 2, texto: escape('qwet*?ÑÁÉÍÓÚ\'&<>¡¿?!|')},{index: 1, name: 2, texto: 'qwet*?ÑÁÉÍÓÚ\'&<>¡¿?!|'}]
	}, function(data) {
		$("#test").html(data);
		//alert(data);
		a = {"index":"1","name":"2","texto":"qwet*%3F%D1%C1%C9%CD%D3%DA%27%26%3C%3E%A1%BF%3F%21%7Cóíú"};
		alert(unescape(a.texto));
		console.log(a.texto);
	});
</script>
<div id="test"></div> 
</body>
</html>